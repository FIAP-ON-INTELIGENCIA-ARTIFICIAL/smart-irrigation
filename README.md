# FIAP - Faculdade de Inform√°tica e Administra√ß√£o Paulista 

![fiap-logo](https://github.com/henriquehsilva/template-projeto-fiap/blob/main/assets/logo-fiap.png, width="200")

<br>

# Smart-Irrigation 

<p align="center">
  <img src="https://github.com/FIAP-ON-INTELIGENCIA-ARTIFICIAL/agrovision-pwa/blob/main/logo-agrovision.png" alt="AgroVision" width="600">
</p>

## üë®‚Äçüéì Integrantes

<table>
  <tr>
    <td width="110" align="center" valign="top">
      <a href="https://github.com/henriquehsilva">
        <img src="https://github.com/henriquehsilva.png" width="100" height="100" alt="Henrique Silva" style="border-radius:50%; object-fit:cover;" />
      </a>
      <br/><strong>Henrique Silva</strong><br/>
      <a href="https://github.com/henriquehsilva">@henriquehsilva</a>
    </td>
    <td width="110" align="center" valign="top">
      <a href="https://github.com/manoellaweiser-gif">
        <img src="https://github.com/manoellaweiser-gif.png" width="100" height="100" alt="Manoella Weiser" style="border-radius:50%; object-fit:cover;" />
      </a>
      <br/><strong>Manoella Weiser</strong><br/>
      <a href="https://github.com/manoellaweiser-gif">@manoellaweiser-gif</a>
    </td>
    <td width="110" align="center" valign="top">
      <a href="https://github.com/JoaoMDPaiva">
        <img src="https://github.com/JoaoMDPaiva.png" width="100" height="100" alt="Jo√£o Paiva" style="border-radius:50%; object-fit:cover;" />
      </a>
      <br/><strong>Jo√£o Paiva</strong><br/>
      <a href="https://github.com/JoaoMDPaiva">@JoaoMDPaiva</a>
    </td>
    <td width="110" align="center" valign="top">
      <a href="https://github.com/adrylan">
        <img src="https://github.com/adrylan.png" width="100" height="100" alt="Luis Adrylan" style="border-radius:50%; object-fit:cover;" />
      </a>
      <br/><strong>Luis Adrylan</strong><br/>
      <a href="https://github.com/adrylan">@adrylan</a>
    </td>
    <td width="110" align="center" valign="top">
      <a href="https://github.com/Luiz-Frederico">
        <img src="https://github.com/Luiz-Frederico.png" width="100" height="100" alt="Luiz Campelo" style="border-radius:50%; object-fit:cover;" />
      </a>
      <br/><strong>Luiz Campelo</strong><br/>
      <a href="https://github.com/Luiz-Frederico">@luizCampelo</a>
    </td>
  </tr>
</table>

## Professores

## üë©‚Äçüè´ Tutor(a)

<table>
  <tr>
    <td width="110" align="center" valign="top">
      <a href="https://github.com/SabrinaOtoni">
        <img src="https://github.com/SabrinaOtoni.png" width="100" height="100" alt="Sabrina Otoni (Tutor)" style="border-radius:50%; object-fit:cover;" />
      </a>
      <br/><strong>Sabrina Otoni</strong><br/>
      <span>Tutor(a)</span><br/>
      <a href="https://github.com/SabrinaOtoni">@SabrinaOtoni</a>
    </td>
  </tr>
</table>

## üß≠ Coordenador(a)

<table>
  <tr>
    <td width="110" align="center" valign="top">
      <a href="#">
        <img src="https://github.com/agodoi.png" width="100" height="100" alt="Coordenador(a)" style="border-radius:50%; object-fit:cover; filter: grayscale(20%);" />
      </a>
      <br/><strong>Andr√© Godoi</strong><br/>
      <span>Coordenador(a)</span><br/>
      <a href="https://github.com/agodoi">@agodoi</a>
    </td>
  </tr>
</table>

---

## üìú Descri√ß√£o

O **Smart-Irrigation** (dentro do escopo do projeto **AgroVision**) √© um sistema experimental e de baixo custo para **automa√ß√£o de irriga√ß√£o** com foco em ensino e pesquisa. O prot√≥tipo integra:

- **Firmware ESP32 (Arduino/C++)** para leitura de sensores/simula√ß√µes (umidade do solo, LDR‚ÜípH did√°tico, n√≠veis N-P-K por bot√µes), aplica√ß√£o de **regras de histerese e seguran√ßa** e acionamento da bomba via rel√©.
- **Coleta de dados em Python** pela porta serial, com gera√ß√£o de **CSV** e **NDJSON**, rota√ß√£o di√°ria de arquivos e logs brutos para auditoria.
- **An√°lises em R** para consolida√ß√£o dos dados e cria√ß√£o de relat√≥rios/gr√°ficos di√°rios (ex.: evolu√ß√£o da umidade).
- **Integra√ß√£o clim√°tica** via API p√∫blica (OpenWeather), permitindo pol√≠ticas como **suspender irriga√ß√£o se houver previs√£o de chuva**.

Al√©m da implementa√ß√£o, o projeto refor√ßa boas pr√°ticas de desenvolvimento (Git/GitHub), documenta√ß√£o e reflex√£o sobre **impactos sociais, √©ticos e ambientais** da tecnologia no agroneg√≥cio.

**Apresenta√ß√£o do ‚ÄúSeu Jorge do Agro‚Äù** ‚Äì Cliente representativo:
[![Apresenta√ß√£o do Seu Jorge do Agro](https://img.youtube.com/vi/cSJFwvnrj1w/hqdefault.jpg)](https://www.youtube.com/watch?v=cSJFwvnrj1w)


**[FIAP | Fase 2] Smart-Irrigation
‚Äù** ‚Äì Funcionamento Completo do Projeto:
[![Smart-Irrigation - uncionamento Completo do Projeto](https://img.youtube.com/vi/m1FP4ee3Ig4/hqdefault.jpg)](https://youtu.be/m1FP4ee3Ig4?si=tEUa6hlrO7wI_4af)


LINK-VIDEO: [https://youtu.be/m1FP4ee3Ig4?si=tEUa6hlrO7wI_4af](https://youtu.be/m1FP4ee3Ig4?si=tEUa6hlrO7wI_4af)

---
## Planejamento e Modelagem da Solu√ß√£o

O projeto foi planejado utilizando o **HSD Framework** (Hypothesize ‚Üí Shape ‚Üí Deliver) para transformar ideias em hip√≥teses test√°veis, definir escopos enxutos e orquestrar entregas cont√≠nuas, garantindo que as necessidades e expectativas dos usu√°rios finais sejam atendidas.

Para mais detalhes sobre o HSD Framework, consulte o [HSD Consultoria ‚Äî da hip√≥tese ao impacto.](https://henriquesilva.substack.com/)

Board do projeto [Miro](https://miro.com/app/board/uXjVJC8Oa2s=/?share_link_id=719781750699).

---
## üìÅ Estrutura de pastas

- **src/**: c√≥digo-fonte do projeto ao longo das fases:
  - `firmware/` ‚Äì c√≥digo do ESP32 (Arduino/C++).
  - `scripts/` ‚Äì (coleta serial ‚Üí CSV/NDJSON) e utilit√°rios.
  - `analytics/` ‚Äì scripts em R (`analysis.R`) para gr√°ficos/relat√≥rios.
- **README.md**: guia geral do projeto.

---

## üîß Como executar o c√≥digo

### Pr√©-requisitos
- **ESP32 + Arduino IDE** (ou PlatformIO)  
  - Placa ESP32 instalada no Arduino IDE  
  - Bibliotecas: `Firebase_ESP_Client`, `ArduinoJson`, `WiFi`, etc.
- **Python 3.10+**  
  - `pip install pyserial`
- **R 4.x**  
  - Pacotes base (para `read.csv` e `png`; instale extras se necess√°rio)

### 1) Firmware (ESP32)
1. Build a aplica√ß√£o
```bash
docker compose up --build -d
```
2. Crie `env.h` com suas 
credenciais (Wi-Fi, Firebase, OpenWeather, etc.).
```bash
mv .env.example .env /
docker compose run --rm envgen
```
3. Compile 
```bash
docker compose run --rm pio
```
4. Abra `src/firmware/`
5. Compile e fa√ßa o upload para o ESP32.
```bash
pio run -e esp32dev -t upload --upload-port /dev/cu.usbserial-5A7B0701171
```
6. Abra o **Serial Monitor** (115200 baud) e valide os logs de leitura e ‚ÄúCSVX‚Äù.
```bash
pio device monitor --port /dev/cu.usbserial-5A7B0701171 -b 115200 --rts 0 --dtr 0
```

### 2) Coleta (Python)`.
Execute:
```bash
   ESP32_PORT=/dev/cu.usbserial-5A7B0701171 ESP32_BAUD=115200 python scripts/serial_to_csv.py
```
**Obs.:** A porta provavelmente ser√° outra acima (usbserial-5A7B0701171) est√° como exemplo.

### 3) An√°lise (R)
1. Abra o RStudio.
2. Carregue `src/analytics/analysis.R`.
3. Ajuste o caminho do CSV (linha 10).
4. Execute o script para gerar gr√°ficos e relat√≥rios.

---
### 4) Stories entregues ‚Äî Vers√£o 1.0

1 - COMO estudante, QUERO inserir dados via Serial no simulador, PARA validar rapidamente cen√°rios sem depender de conectividade externa.

COMO desenvolvedor, QUERO transferir dados manualmente do Python para C/C++, PARA testar o impacto da integra√ß√£o em ambientes de baixo custo.

3 - COMO usu√°rio, QUERO medir a umidade com o sensor DHT22, PARA que a irriga√ß√£o ocorra automaticamente conforme o limite configurado.

4 - COMO agricultor pesquisador, QUERO simular n√≠veis de NPK atrav√©s de bot√µes, PARA testar diferentes condi√ß√µes de nutrientes sem precisar de sensores caros.

5 - COMO estudante, QUERO simular o pH usando um sensor LDR, PARA compreender o impacto da acidez/alkalinidade no acionamento da irriga√ß√£o.

6 - COMO mentor acad√™mico, QUERO que as regras sejam documentadas com base em KPIs, PARA garantir que os resultados possam ser comparados e replicados.

7 - COMO pesquisador, QUERO analisar os dados dos sensores em R, PARA encontrar padr√µes estat√≠sticos que melhorem a robustez das regras de irriga√ß√£o.

8 - COMO agricultor, QUERO que o sistema se integre ao OpenWeather, PARA suspender a irriga√ß√£o quando houver previs√£o de chuva e evitar desperd√≠cio de √°gua.

9 - COMO agricultor, QUERO que um rel√© acione a bomba d‚Äô√°gua automaticamente, PARA manter a irriga√ß√£o alinhada √†s regras da cultura agr√≠cola escolhida.

10 - COMO usu√°rio avan√ßado, QUERO configurar regras de irriga√ß√£o baseadas em nutrientes, pH e umidade, PARA personalizar o controle conforme o tipo de cultura.

11 - COMO pesquisador, QUERO visualizar no dashboard a previs√£o do tempo ao lado dos sensores, PARA correlacionar clima e decis√µes de irriga√ß√£o.

---
### 5) proximos passos (backlog)

12 - COMO agricultor, QUERO uma PWA (Progressive Web App) para acessar o sistema de irriga√ß√£o de qualquer lugar, PARA facilitar o gerenciamento e monitoramento.

---
## üìö Refer√™ncias
- [Documenta√ß√£o Firebase ESP32](https://firebase-esp32.readthedocs.io/en/latest/)
- [Documenta√ß√£o ArduinoJson](https://arduinojson.org/)
- [Documenta√ß√£o PySerial](https://pyserial.readthedocs.io/en/latest/)
- [Documenta√ß√£o OpenWeather API](https://openweathermap.org/api)  
- [Documenta√ß√£o R](https://www.r-project.org/)

---
## üìù Licen√ßa

Este projeto est√° licenciado sob a Licen√ßa Creative Commons Atribui√ß√£o 4.0 Internacional. Para mais detalhes, consulte o arquivo [LICENSE](LICENSE).
